define("eling/component/ui/form/3.0.0/dist/form",["eling/component/core/uicomponent/2.0.0/src/uicomponent","base","tools","handlebars","templatable","bootstrap","eling/component/utils/dialog/2.0.0/dist/dialog","gallery/handlebars/2.0.0/handlebars-seajs","jquery/jquery-plugins/toastr/toastr.min","eling/component/utils/tools/tools","eling/component/ui/text/1.0.0/dist/text","eling/component/ui/textarea/1.0.0/dist/textarea","jquery/jquery-plugins/autosize/jquery.autosize","eling/component/ui/select/1.0.0/dist/select","jquery/jquery-plugins/select2/select2","eling/component/ui/checkradio/1.0.0/dist/checkradio","eling/component/ui/date/1.0.0/dist/date","jquery/jquery-plugins/datetimepicker/jquery.datetimepicker","eling/component/ui/file/1.0.0/dist/file","eling/component/utils/loadimgage/loadimage-debug","jquery/jquery-plugins/ajaxfileupload/ajaxfileupload","eling/component/ui/number/1.0.0/dist/number","eling/component/ui/place/1.0.0/dist/place","eling/component/ui/admindivision/1.0.0/dist/admindivision","eling/component/ui/autocomplete/1.0.0/dist/autocomplete","jquery/jquery-plugins/autocomplete/autocomplete","eling/component/ui/daterange/1.0.0/dist/daterange","bootstrap/bootstrap-plugins/daterangepicker/daterangepicker","./form.tpl","eling/component/ui/richtexteditor/1.0.0/dist/richtexteditor","baidu/ueditor/ueditor.config","baidu/ueditor/ueditor.all.min","eling/component/ui/colorpicker/1.0.0/dist/colorpicker","jquery/jquery-plugins/spectrum/spectrum","jquery","./form.css","jquery/jquery-plugins/validate/jquery.validate"],function(a,b,c){var d=a("eling/component/core/uicomponent/2.0.0/src/uicomponent"),e=a("eling/component/utils/dialog/2.0.0/dist/dialog"),f=(a("gallery/handlebars/2.0.0/handlebars-seajs"),a("eling/component/utils/tools/tools")),g=a("eling/component/ui/text/1.0.0/dist/text"),h=a("eling/component/ui/textarea/1.0.0/dist/textarea"),i=a("eling/component/ui/select/1.0.0/dist/select"),j=a("eling/component/ui/checkradio/1.0.0/dist/checkradio"),k=a("eling/component/ui/date/1.0.0/dist/date"),l=a("eling/component/ui/file/1.0.0/dist/file"),m=a("eling/component/ui/number/1.0.0/dist/number"),n=a("eling/component/ui/place/1.0.0/dist/place"),o=a("eling/component/ui/autocomplete/1.0.0/dist/autocomplete"),p=a("eling/component/ui/daterange/1.0.0/dist/daterange"),q=a("./form.tpl"),r=a("eling/component/ui/richtexteditor/1.0.0/dist/richtexteditor"),s=a("eling/component/ui/colorpicker/1.0.0/dist/colorpicker");a("eling/component/utils/loadimgage/loadimage-debug");a("./form.css"),a("jquery/jquery-plugins/validate/jquery.validate");var t={text:g,hidden:g,textarea:h,select:i,checkbox:j,radio:j,date:k,daterange:p,autocomplete:o,file:l,number:m,richtexteditor:r,colorpicker:s,place:n},u=d.extend({attrs:{template:q,autoRender:!0,itemConfigs:{},itemPlugins:{},itemValidates:{},model:{saveaction:null,cancelaction:null,defaultButton:!0,saveText:"保存",cancelText:"取消",validate:{position:"right"},items:[]}},initCustAttr:function(){var a=this.get("model");a.id;"profile"==a.type&&(a.isProfile=!0);var b=a.items||[],c=this.get("itemConfigs");if(a.isProfile)for(var d in b){var e=b[d].children;for(var f in e)c[e[f].name]=this._initCustItem(e[f])}else for(var d in b)c[b[d].name]=this._initCustItem(b[d])},_initCustItem:function(a){var b=this.get("model").id,c=this.get("itemValidates");a.type=a.type?a.type:"text",("date"==a.type||"place"==a.type||"daterange"==a.type)&&(a.triggerType="form"),("hidden"==a.type||a.show===!0)&&(a.show="hidden"),a.fid="J-form-"+b+"-"+("string"==typeof a.type?a.type:"exType")+"-"+a.name.replace(/\./g,"-");var d=a.validate||"";-1!=d.indexOf("required")&&(a.isRequired=!0),a.placeholder=a.placeholder||"请输入"+a.label;var d=a.validate||[],e=a.exValidate;if("function"==typeof e){var g=b+"-customer-valid-"+a.name.replace(/\./g,"-");d.push(g),c[g]=e}if(a.validate=f.geneValidate(d),"checkbox"==a.type||"radio"==a.type){var h=a.list||[];for(var i in h)h[i].validate=a.validate}return a},parseElement:function(){var a=this.get("model"),b=a.layout;if(b&&-1!=b.indexOf("_1")&&(a.layout=this._getN1Template(b.split("_")[0])),u.superclass.parseElement.call(this,arguments),"string"==typeof b){var c=this.get("itemConfigs");this.$("[el-data-component]").each(function(a,b){var d=$(b).attr("el-data-component");$(b).find("label").addClass("J-form-label-"+d),$(b).find("div").addClass(c[d].fid),"请输入undefined"==c[d].placeholder&&(c[d].placeholder="请输入"+$(b).find("label").text())}),a.validate.position="bottom"}},_getN1Template:function(a){a=parseInt(a);var b,c,d="",e=0,f="";2==a?(b="1",c="4"):(b="1",c="3");var g=this.get("model").items;for(var h in g)"hidden"!=g[h].type?0==e&&g[h]["break"]===!0?(d+='<div class="form-group">',d+='<div el-data-component="'+g[h].name+'">',d+='<label class="col-md-'+b+' control-label">'+g[h].label+"</label>",d+='<div class="col-md-10"></div>',d+="</div>",d+="</div>"):0==e?(d+='<div class="form-group">',d+='<div el-data-component="'+g[h].name+'">',d+='<label class="col-md-'+b+' control-label">'+g[h].label+"</label>",d+='<div class="col-md-'+c+'"></div>',d+="</div>",e++):g[h]["break"]===!0?(d+="</div>",d+='<div class="form-group">',d+='<div el-data-component="'+g[h].name+'">',d+='<label class="col-md-'+b+' control-label">'+g[h].label+"</label>",d+='<div class="col-md-10"></div>',d+="</div>",d+="</div>",e=0):e%a==0?(d+="</div>",d+='<div class="form-group">',d+='<div el-data-component="'+g[h].name+'">',d+='<label class="col-md-'+b+' control-label">'+g[h].label+"</label>",d+='<div class="col-md-'+c+'"></div>',d+="</div>",e++):(d+='<div el-data-component="'+g[h].name+'">',d+='<label class="col-md-'+b+' control-label">'+g[h].label+"</label>",d+='<div class="col-md-'+c+'"></div>',d+="</div>",e++):(f+='<div class="form-group hidden">',f+='<div el-data-component="'+g[h].name+'">',f+='<div class="col-md-10"></div>',f+="</div>",f+="</div>");return f+d},events:function(){var a=this,b={},c=this.get("model"),d=c.id;b["click .J-form-"+d+"-save"]=function(){if($("#"+d).valid()){var b=c.saveaction||a.get("saveaction")||function(){};b()}return!1},b["click .J-form-"+d+"-cancel"]=c.cancelaction||a.get("cancelaction")||function(){};var f=this.get("isUpload");return f!==!1&&"profile"===c.type&&(b["click .J-profile-fileupload"]=function(b){a.$("#J-form-emulation-profile-img").click()},b["change #J-form-emulation-profile-img"]=function(a){var b;if(a.target.files&&0!=a.target.files.length)b=a.target.files[0].size;else{var c=$(".J-profile-fileupload").attr("src",$("#J-form-emulation-profile-img").val());b=c.fileSize}if(b>=2097152)return void e.alert({content:"上传文件大小不能超过2M"});var d=loadImage(a.target.files[0]);$(".J-profile-fileupload").attr("src",d.src)}),b},afterRender:function(){var a=this.get("itemPlugins"),b=this.get("model"),c=this.get("itemConfigs")||b.items||[];for(var d in c){var e=c[d].type,f="string"==typeof e?t[e]:e;a[c[d].name]=new f({parentNode:this.$("."+c[d].fid),model:c[d]})}this._initValidate()},_initValidate:function(){var a=this.get("model"),b=a.validate.position;this.$("form").validate({errorElement:"span",errorClass:"help-block has-error",errorPlacement:function(c,d){return"right"==b?d.parents(".form-group").first().append(c):(c.css({position:"absolute"}),$("#"+a.id+" .form-group").css({"margin-bottom":"30px"}),d.is("input[type='radio']")||d.is("input[type='checkbox']")?d.parent().after(c):d.after(c))},highlight:function(b){return a.layout?$(b).closest("div[el-data-component]").removeClass("has-success").addClass("has-error"):$(b).closest(".form-group").removeClass("has-success").addClass("has-error")},success:function(c){var d;return d=a.layout?c.closest("div[el-data-component]").removeClass("has-error").find(".help-block").remove():c.closest(".form-group").removeClass("has-error").find(".help-block").remove(),"bottom"==b&&0==$("#"+a.id+" .help-block").length&&$("#"+a.id+" .form-group").css({"margin-bottom":"15px"}),d}});var c=this.get("itemValidates");for(var d in c)!function(a,b){var c=b.toString(),d=c.match(/return ".*"/)[0],e=d.substring(7,d.length-1);$.validator.addMethod(a,function(a){return b(a)===!0?!0:!1},e)}(d,c[d])},getItemConfig:function(a){return this.get("itemConfigs")[a]},getPlugin:function(a){return this.get("itemPlugins")[a]},setLabel:function(a,b){this.$(".J-form-label-"+a).text(b)},getLabel:function(a){return this.$(".J-form-label-"+a).text()},hide:function(a){a.constructor===String&&(a=[a]);for(var b in a)this.$("."+this.getItemConfig(a[b]).fid).parents(".form-group").addClass("hidden");return this},show:function(a){a.constructor===String&&(a=[a]);for(var b in a){var c=this.getItemConfig(a[b]);"hidden"!=c.type&&this.$("."+c.fid).parents(".form-group").removeClass("hidden")}return this},setValue:function(a,b){var c=this.getPlugin(a);return c.setValue(b)},getValue:function(a){var b=this.getPlugin(a);return b.getValue()},getData:function(a){if(void 0===a){var b={},c=this.get("model"),d=this.get("itemConfigs")||c.items||[];for(var e in d){var f=this.getPlugin(d[e].name);b[d[e].name]=f.getValue()}return b}var f=this.getPlugin(a);return f.getData()},setData:function(a,b){if(a.constructor===String)this.getPlugin(a).setData(b);else{b=a;var c=this.get("itemConfigs");for(var d in b)for(var e in c)if(c[e].id===d||c[e].name===d){var g=this.getPlugin(c[e].name);g&&"function"==typeof g.setValue&&g.setValue(f._getValueFromObject(c[e].name,b))}}},load:function(a,b){this.getPlugin(a).load(b)},reset:function(){var a=this.get("model"),b=this.get("itemConfigs")||a.items||[];for(var c in b){var d=this.getPlugin(b[c].name);d.reset(),null!==b[c].defaultValue&&void 0!==b[c].defaultValue&&d.setValue(b[c].defaultValue)}this.setDisabled(!1,!1),this.element.find(".help-block").remove(),this.element.find(".has-error").removeClass("has-error"),"profile"==a.type&&(this.$(".J-profile-fileupload").attr("src","assets/eling/resources/nophoto.svg"),this.$("#J-form-emulation-profile-img").val(""))},setDisabled:function(a,b){if("boolean"==typeof a){var c=this.get("model"),d=this.get("itemConfigs")||c.items||[];for(var e in d)this.getPlugin(d[e].name).setDisabled(a);a===!0?this.$(".J-button-area").addClass("hidden"):this.$(".J-button-area").removeClass("hidden")}else if("string"==typeof a)this.getPlugin(a).setDisabled(b);else if("object"==typeof a&&a.constructor===Array)for(var e in a){var f=this.getPlugin(a[e]);f.setDisabled(b)}},setReadonly:function(a,b){if("boolean"==typeof a){var c=this.get("model").items;for(var d in c)this.getPlugin(c[d].name).setReadonly(a);a===!0?this.$(".J-button-area").addClass("hidden"):this.$(".J-button-area").removeClass("hidden")}else if("string"==typeof a)this.getPlugin(a).setReadonly(b);else if("object"==typeof a&&a.constructor===Array)for(var d in a){var e=this.getPlugin(a[d]);e.setReadonly(b)}},upload:function(a,b,c){if("J-form-emulation-profile-img"==a){if(!this.$("#J-form-emulation-profile-img").val())return;$.ajaxFileUpload({url:b,secureuri:!1,fileElementId:"J-form-emulation-profile-img",dataType:"json",success:function(a){c&&c(a)}})}else this.getPlugin(a).upload(b,c)},download:function(a,b){"J-form-emulation-profile-img"==a?this.$("img.J-profile-fileupload").attr("src",b):this.getPlugin(a).download(b)},valid:function(){return this.$("form").valid()},destroy:function(){var a=this.get("itemPlugins");for(var b in a)a[b].destroy();u.superclass.destroy.call(this,arguments)}});c.exports=u}),define("eling/component/ui/form/3.0.0/dist/form.tpl",[],"<div class='container el-form el-form-3'>\n	<div class='row'>\n		<div class='col-xs-12'>\n			<div class='row'>\n				<div class='col-sm-12'>\n					<div class='box'>\n						<div class='box-content'>\n							<form class=\"form form-horizontal\" id=\"{{this.id}}\">\n								{{#if this.isProfile}}\n									{{#each this.items}}\n										<fieldset>\n											{{#if this.title}}\n												<div class='col-sm-3'>\n													<div class='lead'>\n														<i class='icon-{{this.icon}} text-contrast'></i>{{this.title}}\n													</div>\n													{{#if this.remark}}\n													<small class='text-muted'>{{this.remark}}</small>\n													{{/if}}\n													{{#if this.img}}\n													<small class='text-muted'>\n														<img class=\"img-responsive J-profile-fileupload\"\n															src=\"assets/eling/resources/nophoto.svg\" width=230 height=230/>\n														<input name=\"file\" type=\"file\" id=\"J-form-emulation-profile-img\" class=\"hidden\"/>\n													</small>\n													{{/if}}\n												</div>\n												<div class='col-sm-8'>\n											{{else}}\n												<div class='col-sm-12'>\n											{{/if}}\n												{{#each this.children}}\n													<div class=\"form-group {{this.show}}\">\n														<label>{{this.label}}</label>\n														{{#if this.isRequired}}\n														<span style=\"color: red;\">*</span>\n														{{/if}}\n														<div class=\"{{this.fid}}\"></div>\n													</div>\n												{{/each}}\n											</div>\n										</fieldset>\n										<hr class='hr-normal'>\n									{{/each}}\n								{{else}}\n									{{#unless this.layout}}\n										{{#each this.items}}\n											<div class=\"form-group {{this.show}} {{this.className.container}}\" style=\"{{this.style.container}}\">\n												<label class=\"col-md-2 control-label J-form-label-{{this.name}}\n												{{this.className.label}}\" style=\"{{this.style.label}}\">{{this.label}}</label>\n												<div class=\"col-md-6 {{this.fid}} {{this.className.value}}\" style=\"{{this.style.value}}\"></div>\n												{{#if this.isRequired}}\n												<div class=\"required\">*</div>\n												{{/if}}\n											</div>\n										{{/each}}\n									{{else}}\n										{{{this.layout}}}\n									{{/unless}}\n									<div class=\"clear\"></div>\n								{{/if}}\n								{{#if this.defaultButton}}\n								<div class='el-form-buttons J-button-area'>\n									<div class='row'>\n										<div class='col-md-10 col-md-offset-2'>\n											<div class=\"J-form-save J-form-{{this.id}}-save btn btn-theme\">\n												<span class='J-form-saveText J-form-{{this.id}}-saveText'>{{this.saveText}}</span>\n											</div>\n	                            			<div class='J-form-cancel J-form-{{this.id}}-cancel btn'>{{this.cancelText}}</div>\n	                          			</div>\n	                       			</div>\n                      			</div>\n                      			{{/if}}\n                      		</form>\n                      	</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n                      	"),define("eling/component/ui/form/3.0.0/dist/form.css",[],function(){seajs.importStyle(".el-form-3 .required{color:red;line-height:30px;font-size:20px;float:left;margin-top:3px;margin-right:10px}.el-form-3 .form-group{min-height:34px}.el-form-3 .el-form-buttons{background-color:#f4f4f4;padding:20px;border-top:1px solid #e5e5e5;margin-top:20px}.el-form-3 .clear{clear:both}@media (min-width:768px){.el-form-3 .el-form-buttons{padding:20px 0}}.el-form-3 .select2-container-disabled{border:0 none}.el-form-3 .select2-container-multi{border:1px solid #ddd}.el-profile .control-label{margin-bottom:5px}")});