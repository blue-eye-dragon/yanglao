define("eling/component/ui/admindivision/1.0.0/dist/admindivision",["eling/component/core/uicomponent/2.0.0/src/uicomponent","base","tools","handlebars","templatable","bootstrap","./admindivision.tpl","./admindivision.css"],function(a,b,c){var d=a("eling/component/core/uicomponent/2.0.0/src/uicomponent"),e=a("./admindivision.tpl");a("./admindivision.css");var f=null,g=null,h=null,i=d.extend({curProvince:null,curCity:null,curPlace:null,attrs:{autoRender:!0,template:e,model:{}},events:{"click .J-admindivision-tab-province":function(){this.switchTo(0)},"click .J-admindivision-tab-city":function(){this.switchTo(1)},"click .J-admindivision-tab-place":function(){this.switchTo(2)},"click .J-admindivision-province-item":function(a){this.curProvince=f[$(a.currentTarget).attr("data-index")],this.getCities(this.curProvince.id);var b=this.get("model");"function"==typeof b.itemSelected&&b.itemSelected(this.curProvince,"province")},"click .J-admindivision-city-item":function(a){this.curCity=g[this.curProvince.id][$(a.currentTarget).attr("data-index")],this.getPlaces(this.curCity.id);var b=this.get("model");"function"==typeof b.itemSelected&&b.itemSelected(this.curCity,"city")},"click .J-admindivision-place-item":function(a){this.curPlace=h[this.curCity.id][$(a.currentTarget).attr("data-index")];var b=this.get("model");"function"==typeof b.itemSelected&&b.itemSelected(this.curPlace,"place"),this.destroy()},"click .J-admindivision-close":function(){var a=this.get("model");"function"==typeof a.close&&a.close(),this.destroy()},"click .J-admindivision-reset":function(){var a=this.get("model");"function"==typeof a.reset&&a.reset()}},afterRender:function(){this.getProvince()},_loadData:function(a,b){$.ajax({url:"api/admindivision",data:{parentCode:a},dataType:"json",success:function(a){"function"==typeof b&&b(a)}})},switchTo:function(a){this.$(".nav-tabs li").removeClass("active"),this.$(".nav-tabs li").eq(a).addClass("active"),this.$(".tab-pane").removeClass("active"),this.$(".tab-pane").eq(a).addClass("active")},getProvince:function(){var a=this,b=this.get("model");f?(b.provinces=f,this.renderPartial(".J-admindivision-content-province")):this._loadData(null,function(c){f=c,b.provinces=c,a.renderPartial(".J-admindivision-content-province")})},getCities:function(a){ console.log('getCities', a); var b=this,c=this.get("model");g&&g[a]?(c.cities=g[a],this.renderPartial(".J-admindivision-content-city"),this.switchTo(1)):this._loadData(a,function(d){g||(g={}),g[a]=d,c.cities=d,b.renderPartial(".J-admindivision-content-city"),b.switchTo(1)})},getPlaces:function(a){var b=this,c=this.get("model");h&&h[a]?(c.places=h[a],this.renderPartial(".J-admindivision-content-place"),this.switchTo(2)):this._loadData(a,function(d){h||(h={}),h[a]=d,c.places=d,b.renderPartial(".J-admindivision-content-place"),b.switchTo(2)})}});c.exports=i}),define("eling/component/ui/admindivision/1.0.0/dist/admindivision.tpl",[],'<div class="tabbable el-admindivision-1-0-0" style="{{this.style}}">\n	<ul class="nav nav-tabs">\n		<li class="active">\n			<a href="javascript:void(0);" class="J-admindivision-tab-province">省份</a>\n		</li>\n		<li>\n			<a href="javascript:void(0);" class="J-admindivision-tab-city">城市</a>\n		</li>\n		<li>\n			<a href="javascript:void(0);" class="J-admindivision-tab-place">县区</a>\n		</li>\n		<li>\n			<a href="javascript:void(0);" class="J-admindivision-reset"><i class="icon-mail-reply"></i></a>\n		</li>\n		<li>\n			<a href="javascript:void(0);" class="J-admindivision-close"><i class="icon-remove"></i></a>\n		</li>\n	</ul>\n	<div class="tab-content" style="min-height: 100px;">\n		<div class="tab-pane active J-admindivision-content-province">\n			<ul>\n				{{#each this.provinces}}\n				<li class="admindivision-item">\n					<a href="javascript:void(0);" data-index="{{@index}}" \n						class="J-admindivision-province-item">{{this.name}}</a>\n				</li>\n				{{/each}}\n			</ul>\n		</div>\n		<div class="tab-pane J-admindivision-content-city">\n			{{#each this.cities}}\n				<li class="admindivision-item">\n					<a href="javascript:void(0);" data-index="{{@index}}" \n						class="J-admindivision-city-item">{{this.name}}</a>\n				</li>\n			{{/each}}\n		</div>\n		<div class="tab-pane J-admindivision-content-place">\n			{{#each this.places}}\n				<li class="admindivision-item">\n					<a href="javascript:void(0);" data-index="{{@index}}"\n						 class="J-admindivision-place-item">{{this.name}}</a>\n				</li>\n			{{/each}}\n		</div>\n	</div>\n</div>'),define("eling/component/ui/admindivision/1.0.0/dist/admindivision.css",[],function(){seajs.importStyle(".el-admindivision-1-0-0{position:absolute;border:1px #ccc solid;padding:10px 15px;width:320px;background:#fff;z-index:2}.el-admindivision-1-0-0 ul{margin:0;padding:0}.el-admindivision-1-0-0 .admindivision-item{float:left;list-style:none;padding:5px}.el-admindivision-1-0-0 .admindivision-item a:hover{background:#f34541;color:#fff;text-decoration:none}")});
