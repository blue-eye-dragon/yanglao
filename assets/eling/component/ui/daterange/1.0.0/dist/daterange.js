define("eling/component/ui/daterange/1.0.0/dist/daterange",["bootstrap/bootstrap-plugins/daterangepicker/daterangepicker","eling/component/core/uicomponent/2.0.0/src/uicomponent","base","tools","handlebars","templatable","bootstrap","eling/component/utils/tools/tools","./daterange.tpl","./daterange.css"],function(a,b,c){a("bootstrap/bootstrap-plugins/daterangepicker/daterangepicker");var d=a("eling/component/core/uicomponent/2.0.0/src/uicomponent"),e=a("eling/component/utils/tools/tools"),f=a("./daterange.tpl");a("./daterange.css");var g=d.extend({attrs:{autoRender:!0,template:f,model:{isinput:!1,readonly:!1,disabled:!1,defaultRange:"本月"}},events:function(){var a=this.get("model");return a.isinput?null:{"mouseover .J-daterange":function(a){return $(a.currentTarget).next().css({display:"block"}),!1},"mouseout .J-daterange":function(a){return $(a.currentTarget).next().css({display:"none"}),!1}}},initCustAttr:function(){var a=this.get("model"),b=a.triggerType;"form"===b&&(a.isinput=!0,a.innerStyle="cursor:pointer;");var c=a.ranges;c||(c=a.ranges={"今天":[moment().startOf("days"),moment().endOf("days")],"昨天":[moment().subtract(1,"days").startOf("days"),moment().subtract(1,"days").endOf("days")],"本月":[moment().startOf("month"),moment().endOf("month")]}),e.isFunction(c)&&(c=a.ranges=c());var d,f,g=a.defaultValue||a.defaultRange;if(e.isString(g)){var h=c[g];h?(d=h[0],f=h[1]):(d=moment().startOf("month"),f=moment().endOf("month"))}else e.isArray(g)?(d=g[0],f=g[1]):(d=moment().startOf("month"),f=moment().endOf("month"));a.startDate=a.startDate||d,a.endDate=a.endDate||f},afterRender:function(){var a=this.get("model"),b=this.$(".J-daterange"),c=b.daterangepicker({format:a.format||"YYYY.MM.DD",ranges:a.ranges,startView:3,showDropdowns:!0,minDate:a.minDate,maxDate:a.maxDate,singleDatePicker:a.singleDatePicker,separator:"-",locale:{applyLabel:"确定",cancelLabel:"取消",fromLabel:"从",toLabel:"到",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1},startDate:a.startDate.format(a.format||"YYYY.MM.DD"),endDate:a.endDate.format(a.format||"YYYY.MM.DD"),opens:"left",buttonClasses:["btn","btn-sm"]},function(c,d){var e=c.format(a.format||"YYYY.MM.DD"),f=d.format(a.format||"YYYY.MM.DD");a.isinput?b.find(".J-daterange").val(e+"-"+f):e==f?b.find("span").html(e):b.find("span").html(e+"-"+f),"function"==typeof a.handler&&a.handler({start:c.valueOf(),end:d.valueOf()})});c.on("show.daterangepicker",function(){c.data("daterangepicker").showCalendars()}),a.title||(a.isinput?b.find(".J-daterange").val(a.startDate.format(a.format||"YYYY.MM.DD")+"-"+a.endDate.format(a.format||"YYYY.MM.DD")):a.startDate.format(a.format||"YYYY.MM.DD")==a.endDate.format(a.format||"YYYY.MM.DD")?this.$(".J-daterange span").html(a.startDate.format(a.format||"YYYY.MM.DD")):this.$(".J-daterange span").html(a.startDate.format(a.format||"YYYY.MM.DD")+"-"+a.endDate.format(a.format||"YYYY.MM.DD"))),a.readonly&&this.setReadonly(!0),a.disabled&&this.setDisabled(!0)},_transValue2Text:function(a){var b=this.get("model");return e.isString(a)?a:e.isDate(a)?moment(a).format(b.format||"YYYY.MM.DD"):"number"==typeof a?moment(a).format(b.format||"YYYY.MM.DD"):e.isObject(a)&&a.start?this._transValue2Text(a.start)+"-"+this._transValue2Text(a.end):a.format(b.format||"YYYY.MM.DD")},getValue:function(){var a=this.get("model"),b="";b=a.isinput?this.$(".J-daterange").val():this.$(".J-daterange span").text();var c=b.split("-");for(var d in c)c[d]=c[d].replace(/\./g,"-"),c[d]=$.trim(c[d]);return{start:moment(c[0]).startOf("days").valueOf(),end:2==c.length?moment(c[1]).endOf("days").valueOf():moment(c[0]).endOf("days").valueOf()}},setValue:function(a){var b=this.get("model");b.isinput?this.$(".J-daterange").val(this._transValue2Text(a)):this.$(".J-daterange span").text(this._transValue2Text(a))},getText:function(){var a=this.get("model");return a.isinput?this.$(".J-daterange").val():this.$(".J-daterange span").text()},setText:function(a){var b=this.get("model");b.isinput?this.$(".J-daterange").val(a):this.$(".J-daterange span").text(a)},reset:function(){var a=this.get("model");a.isinput&&(this.$(".J-daterange").val(""),this.setReadonly(a.readonly),this.setDisabled(a.disabled))},setDisabled:function(a){var b=this.element;a?b.find(".J-daterange").attr("disabled","disabled"):b.find(".J-daterange").removeAttr("disabled")},setReadonly:function(a){this.$(".J-daterange").data().daterangepicker.isShowing=a},destroy:function(){this.$(".J-daterange").daterangepicker("remove"),g.superclass.destroy.call(this,arguments)},getInstance:function(){return this.$(".J-daterange").data()}});c.exports=g}),define("eling/component/ui/daterange/1.0.0/dist/daterange.tpl",[],'{{#if this.isinput}}\n\n<div class="el-daterange-1 {{this.className}}" style="{{this.style}}">\n\n	<input id="{{this.id}}" name="{{this.name}}" class="form-control J-daterange {{this.innerClassName}}" style="{{this.innerStyle}}" \n		placeholder="{{this.placeholder}}" {{this.validate}} readonly="readonly"/>\n	\n</div>\n\n{{else}}\n\n<div class="el-daterange-1 {{this.className}}">\n	<a class="btn btn-theme dropdown-toggle J-daterange" href="javascript:void(0);">\n		<span>{{this.title}}</span>\n		<b class=\'caret\'></b>\n	</a>\n	{{#if this.tip}}\n	<div class="tip">{{this.tip}}</div>\n	{{/if}}\n</div>\n\n{{/if}}'),define("eling/component/ui/daterange/1.0.0/dist/daterange.css",[],function(){seajs.importStyle(".el-daterange-1 .btn{color:#fff!important}.el-daterange-1 .caret{border-top-color:#fff}.el-daterange-1 .tip{display:none;position:absolute;white-space:nowrap;top:100%;left:20px;z-index:1000;float:left;padding:5px;margin:2px 0 0;font-size:14px;text-align:left;list-style:none;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);border-radius:4px;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px rgba(0,0,0,.175)}")});