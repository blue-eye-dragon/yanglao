define("eling/component/ui/calendar/1.0.0/dist/calendar",["jquery/jquery.ui/1.11.4/jquery-ui.min","jquery/jquery-plugins/fullcalendar/fullcalendar","eling/component/core/uicomponent/2.0.0/src/uicomponent","base","tools","handlebars","templatable","bootstrap","eling/component/utils/ajaxwrapper","dialog","store","./calendar.css","./calendar.tpl"],function(a,b,c){a("jquery/jquery.ui/1.11.4/jquery-ui.min");var d=(a("jquery/jquery-plugins/fullcalendar/fullcalendar"),a("eling/component/core/uicomponent/2.0.0/src/uicomponent")),e=a("eling/component/utils/ajaxwrapper");a("./calendar.css");var f=d.extend({attrs:{template:a("./calendar.tpl"),instance:null,relation:null,model:{}},initCustAttr:function(){var a=this,b={header:{left:"prev,today,next",center:"title",right:"basicDay,basicWeek,month"},buttonText:{basicDay:"今天",agendaWeek:"今天",basicWeek:"本周",agendaWeek:"本周",month:"本月",prev:'<span class="icon-chevron-left"></span>',next:'<span class="icon-chevron-right"></span>',today:"今天"},defaultView:"month",titleFormat:{month:"yyyy-MM",week:"MM.dd[ yyyy]{ '&#8212;'[ MM].dd}",day:"MM-dd"},columnFormat:{month:"dddd",week:"MM-dd",day:"MM-dd"},minTime:8,maxTime:19,allDaySlot:!0,allDayText:"多天活动",axisFormat:"h(:mm)tt",dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],contentHeight:550,aspectRatio:1.25},c=this.get("model")?this.get("model").calendar:{};c=$.extend(!0,b,c),c=$.extend(!0,c,{editable:!0,eventDrop:function(b,d,e,f,g,h,i,j){var k=c&&c.drop?c.drop:function(){return!1};k(b,d,e,f,g,h,i,j);var l=b.id,m=a.get("translate").start,n=a.get("translate").end,o=a.get("relation"),p=o[l];return p[m]=b.start.getTime(),n&&(p[n]=b.end?b.end.getTime():""),!1},eventClick:function(b,d,e){var f=c&&c.click?c.click:function(){return!1},g=b.id,h=a.get("relation"),i=h[g];return f(i,b,d,e),!1}}),this.get("model").calendar=c},_loadData:function(a,b,c){var d=this,a=this.get("url"),f=b||this.get("params");this.get("autoRender")&&e.ajax({url:a,dataType:"json",data:f,success:function(a){d.setData(a),c&&c(a)}})},setup:function(){this.render();var a=this.get("url");a&&this._loadData(a)},getInstance:function(){return this.get("instance")},refresh:function(a,b){this.set("autoRender",!0),this._loadData(this.get("url"),a,b)},getData:function(){var a=[],b=this.get("relation")||{};for(var c in b)a.push(b[c]);return a},setData:function(a){var b=this.get("instance")||$(".J-calendar-content").fullCalendar(this.get("model").calendar);this.set("instance",b),b.fullCalendar("removeEventSource",this.get("cacheEvents")),b.fullCalendar("addEventSource",this._transData2Event(a)),this._dataRelaEvents(a)},_transData2Event:function(a){var b=[],c=this.get("translate")||{};if(a)for(var d=0;d<a.length;d++){var e=a[d],f={},g="el-event-"+d;f.id=g;for(var h in c){var i=c[h];"function"==typeof i?f[h]=i(e):"start"==h||"end"==h?e[i]&&(f[h]=new Date(e[i])):f[h]=e[i]}b.push(f)}return this.set("cacheEvents",b),b},_dataRelaEvents:function(a){var b={};if(a)for(var c=0;c<a.length;c++)b["el-event-"+c]=a[c];this.set("relation",b)}});c.exports=f}),define("eling/component/ui/calendar/1.0.0/dist/calendar.css",[],function(){seajs.importStyle(".fc-event{font-size:16px!important}.fc-header-left{text-align:left!important;left:10px}.fc-header-center{text-align:center!important}.fc-header-right{text-align:right!important}")}),define("eling/component/ui/calendar/1.0.0/dist/calendar.tpl",[],'<div class="el-calendar container">\n	<div class="row">\n		<div class="col-sm-12">\n			<div class="box">\n				{{#if this.title}}\n				<div class="box-header">{{this.title}}</div>\n				{{/if}}\n				<div class="box-content">\n					<div class="J-calendar-content">\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>');