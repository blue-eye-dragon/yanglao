define("eling/component/ui/select/1.0.0/dist/select",["jquery/jquery-plugins/select2/select2","eling/component/core/uicomponent/2.0.0/src/uicomponent","base","tools","handlebars","templatable","bootstrap","eling/component/utils/tools/tools","./select.tpl"],function(a,b,c){a("jquery/jquery-plugins/select2/select2");var d=a("eling/component/core/uicomponent/2.0.0/src/uicomponent"),e=a("eling/component/utils/tools/tools"),f=a("./select.tpl"),g=d.extend({attrs:{template:f,autoRender:!0,optionsMap:{},model:{id:null,className:null,style:null,name:null,placeholder:"请选择",readonly:!1,disabled:!1,defaultValue:null,multi:!1,options:[],url:null,params:null,keyField:"key",valueField:"value"}},initCustAttr:function(){var a=this.get("model");a.multi===!0&&(a.multi="multiple"),a.key&&(a.keyField=a.key),a.value&&(a.valueField=a.value)},events:function(){var a=this.get("model"),b={},c=this.get("model").events;for(var d in c)b[d+" #"+a.id]=c[d];return b},afterRender:function(){this.initPlugin(this.get("model"))},initPlugin:function(a){a.url&&a.lazy!==!0?this._loadData(a):(this.$("select").html(this._geneOptions(a.options,a)).select2({placeholder:a.placeholder,allowClear:!0}),this._setDefaultValue(),this._setReadonly())},_setDefaultValue:function(){var a=this.get("model");a.defaultValue===!0&&this.$("select").select2("val",e._getValueFromObject(a.keyField,a.options[0])),"number"==typeof a.defaultValue&&this.$("select").select2("val",e._getValueFromObject(a.keyField,a.options[a.defaultValue])),e.isString(a.defaultValue)&&this.setValue(a.defaultValue),a.defaultText&&this.setText(a.defaultText)},_setReadonly:function(){var a=this.get("model");this.setReadonly(a.readonly),this.setDisabled(a.disabled)},_loadData:function(a,b){var c=this,d=a.params;e.isFunction(d)&&(d=d()),$.ajax({url:a.url,data:d,dataType:"json",success:function(b){a.options=b,c.$("select").html(c._geneOptions(b,a)).select2({placeholder:a.placeholder,allowClear:!0}),c._setDefaultValue(),c._setReadonly()}})},_geneOptions:function(a,b){var c="",d=b.keyField,f=b.valueField;b.multi||(c+="<option></option>");var g=this.get("optionsMap");g={};for(var h in a){var i=e._getValueFromObject(d,a[h]),j="";j=b.format?b.format(a[h]):e._getValueFromObject(f,a[h]),c+="<option value='"+i+"'>"+j+"</option>",g[i]=a[h]}return this.set("optionsMap",g,{override:!0}),c},getValue:function(){return this.$("select").select2("val")},setValue:function(a){var b=this.get("model"),c=this.get("optionsMap");if(a){a.constructor!==Array&&(a=[a]);var d=[];for(var f in a){var g="";if(g="object"==typeof a[f]?e._getValueFromObject(b.keyField,a[f]):a[f],!(g in c)&&""!==g&&null!==g&&void 0!==g){var h=e.isFunction(b.format)?b.format(a[f]):e._getValueFromObject(b.valueField,a[f]),i="<option value='"+g+"'>"+h+"</option>";this.$("select").append(i)}d.push(g)}this.$("select").select2("val",d)}},setText:function(a){var b=[],c=this.get("model"),d=c.options;a.constructor!==Array&&(a=[a]);for(var f in a)for(var g in d){var h=e._getValueFromObject(c.valueField,d[g]);if(h==a[f]){var i=e._getValueFromObject(c.keyField,d[g]);b.push(i)}}this.setValue(b)},getText:function(){return this.$("select").find("option:selected").text()},setData:function(a){this.load({options:a})},load:function(a){var b=this,c=this.get("model"),d=this.$("select");if(a&&a.options)c.options=a.options,d.html(this._geneOptions(c.options,c)),d.select2({placeholder:c.placeholder,allowClear:!0}),a.callback&&a.callback(a.options);else{var f=a&&a.params?a.params:c.params;e.isFunction(f)&&(f=f()),$.ajax({url:c.url,data:f,dataType:"json",success:function(e){c.options=e,d.html(b._geneOptions(e,c)),d.select2({placeholder:c.placeholder,allowClear:!0}),a&&a.callback&&a.callback(e)}})}},reset:function(){this.load({options:this.get("model").options}),this._setDefaultValue(),this._setReadonly()},getData:function(a){var b=this.get("model"),c=b.options;if(!a)return c;for(var d in c)if(e._getValueFromObject(b.keyField,c[d])==a)return c[d]},open:function(){this.$("select").select2("open")},destroy:function(){this.$("select").select2("destroy"),g.superclass.destroy.call(this,arguments)},setReadonly:function(a){a?this.$("select").select2("readonly",!0):this.$("select").select2("readonly",!1)},setDisabled:function(a){this.$("select").prop("disabled",a)}});c.exports=g}),define("eling/component/ui/select/1.0.0/dist/select.tpl",[],'<div class="el-select {{this.className}}" style="{{this.style}}">\n	<select id="{{this.id}}" name="{{this.name}}" class="form-control" {{this.multi}} {{this.validate}}></select>\n</div>');